# README File

Created by: EPA133a Group 16

|    Name     | Student Number |
| :---------: | :------------- |
| Rachel Delvin Sutiono | 6284736        |
|  Celia Martínez Sillero  | 6222102         |
| Daniela Ríos Mora | 6275486       |
| Thunchanok Phutthaphaiboon| 6141153        |
| Yao Wang | 6157513         |



## Introduction

In the folder (EPA133a-G16-A2),  can find place group 16's lab submission for the Assignment 2.

This README file is to help a first-time user understand what it is about and how they might be able to use it.
 

## Purpose and objective of this project

This assignment focuses on simulating vehicle travel times under different infrastructure conditions in Bangladesh. Using Mesa library, an agent-based modeling tool, we built a simulation model to study how bridge conditions impact driving time on the N1 road. 
We test the model under nine different scenarios (from 0 to 9). Each scenario has different probabilities for bridge failures. 
The model outputs the average travel time for each scenario. The results are visualized in a box plot to compare the average travel time under different scenarios.

## Structure

The following submission is provided with the following structure:
Structure inside this ZIP file: 

    Folder EPA133a-G16-A2

        Subfolder data
            Subfolder raw
               -_roads3.csv
                -BMMS_overview.xlsx
                -demo-1.csv
                -demo-2.csv
                -demo-3.csv 

            Subfolder processed
                -demo_100.csv (current data for the model)

            Subfolder experiment
                -merged_scenarios_summary.csv
                -scenario0.csv
                -scenario1.csv
                -scenario2.csv
                -scenario3.csv
                -scenario4.csv
                -scenario5.csv
                -scenario6.csv
                -scenario7.csv
                -scenario8.csv

      Subfolder model
            Subfolder Continuous Space
                -continuous_space.py
                -continuous_space_viz.py
            -model.py
            -components.py
            -model_viz.py
            -exploring.py
            -model_run.py
            -requirements.txt
            -Visualisation.ipynb
            -README.md

      Subfolder report
            -EPA133a-G16-A1-Report.pdf

      Subfolder notebook
            -Bonus Exercise 1.ipynb
            -CreateDemoFile.ipynb

      -README.md (this file)


## Main Files

- [model.py](model.py): Contains the model `BangladeshModel` which is a subclass of Mesa `Model`.  It reads a `csv` file with specific format for (transport) model generation.In this case it reads [demo_100.csv](demo_100.csv) which is the file with the information of road N1.

- [components.py](components.py): Contains the model component definitions for the (main) model. 

- [model_viz.py](model_viz.py): Sets up the visualization; uses the `SimpleCanvas` element defined. Calls the model. Run the visualization server.

- [model_run.py](model_run.py): Sets up the model run (conditions). Calls the model. Run the simulation without visualization.

- [requirements.txt](requirements.txt): Contains the required libraries to run the model.

- [visualisation.py](visualisation.py): Contains the code to visualize the boxplot of the nine scenarios.

- [README.md](README.md): This file.

- [ContinuousSpace](ContinuousSpace): The directory contains files needed to visualize Python3 Mesa models on a continuous canvas with geo-coordinates, a functionality not contained in the current Mesa package.

- [ContinuousSpace/SimpleContinuousModule.py](ContinuousSpace/SimpleContinuousModule.py): Defines `SimpleCanvas`, the Python side of a custom visualization module for drawing objects with continuous positions. This is a slight adaptation of the Flocker example provided by the Mesa project.

- [ContinuousSpace/simple_continuous_canvas.js](ContinuousSpace/simple_continuous_canvas.js): JavaScript side of the `SimpleCanvas` visualization module. It takes the output generated by the Python `SimpleCanvas` element and draws it in the browser window via HTML5 canvas. It can draw circles and rectangles. Both can have text annotation. 




## How to Use

The main file for the user to get the results is [model_run.py](model/model_run.py). This file contains the code to run the simulation model without visualization. 

1. Run the notebook [CreateDemoFile.ipynb](notebook/CreateDemoFile.ipynb) to create the demo_100.csv file. This file creates the csv with the information of the road N1.
 
    Input: [_roads3.csv](data/raw/_roads3.csv), [BMMS_overview.xlsx](data/raw/BMMS_overview.xlsx)
    Output:
           [demo_100csv](data/processed/demo_100.csv).

2. Run model_run.py to get the results of the simulation. The results of each step will be printed in the console. 
 
    Output:
                Results per step in terminal,(__Note: to reduce computational time, we commented the Vehicle print functions__)
                [scenario0.csv](data/processed/scenario0.csv),
                [scenario1.csv](data/processed/scenario1.csv),
                [scenario2.csv](data/processed/scenario2.csv),
                [scenario3.csv](data/processed/scenario3.csv),
                [scenario4.csv](data/processed/scenario4.csv),
                [scenario5.csv](data/processed/scenario5.csv),
                [scenario6.csv](data/processed/scenario6.csv),
                [scenario7.csv](data/processed/scenario7.csv),
                [scenario8.csv](data/processed/scenario8.csv),

3. To visualize the results: run the [visualisation.py](model/visualisation.py) file. This file contains the code to visualize the boxplot of the nine scenarios.
    Input: all 9 csv scenario files. (see 2.)
    Output: [outputboxplot2.png](img/outputboxplot2.png)

Please, keep in mind that the computational time to run the 9 scenarios is long.
We commented the VehicleTruck printing function to reduce time to 15 mins run.
More specifically, we commented the last line of code of the step function of the Vehicle(Agent) class:


More specifically, we commented the last line of code of the `step` function of the `Vehicle` (Agent) class in the `components.py` file:

print(self)


You can find the [step function](Assignment 2/EPA133a-G16-A2 FINAL/model/components.py:242)  in (components.py>Vehicle(Agent)>step()) function in the `Vehicle` class in the `components.py` file.
Find attached the results of the simulation in the [experiment](experiment) folder. 





